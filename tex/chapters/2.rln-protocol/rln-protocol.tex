\chapter{Analisi del protocollo RLN}
\chaptermark{Analisi del protocollo RLN}
\label{chap:rln-protocol}

Nel presente capitolo, tratteremo la discussione del protocollo RLN (Rate Limiting Nullifier), che consente la
costruzione di regole di rate-limiting anti DoS e spam in ambiente anonimo. La prima proposta del protocollo è stata
sviluppata da Barry WhiteHat, un ricercatore attivo nel campo della blockchain e delle applicazioni Zero Knowledge, nel
seguente post: "Semaphore RLN, rate limiting nullifier for spam prevention in anonymous p2p setting". Attualmente, RLN
fa parte di (PSE) Privacy \& Scaling Explorations, un team multidisciplinare sostenuto dalla Fondazione Ethereum, che
esplora nuove tecnologie Zero Knowledge e altre primitive crittografiche. Alcuni progetti di rilievo includono zk-kit,
Interep e Semaphore. RLN è ancora un protocollo poco conosciuto, e non esistono ancora grosse implementazioni al di
fuori del contesto di ricerca. Il progetto in stato più avanzato è relativo a un lavoro portato avanti da Vac che sta
lavorando sull'implementazione del protocollo all'interno di Waku v2, la seconda versione di un protocollo di
comunicazione peer-to-peer privacy-preserving in ambiente decentralizzato.

Il meccanismo RLN prima di tutto impone agli utenti di generare una chiave privata che sarà utlizzata per ricavare un identity commitment utilizzando la funzione hash Poseidon. In seguito per registrarsi, gli utenti devono fornire il loro identity commitment, che viene memorizzato in una foglia dell'albero di Merkle, il quale rappresenta la struttura dati dei membri del servizio. Per evitare attacchi di tipo Sybil il protocollo dà la possibilità di richiedere agli utenti in fase di registrazione anche una "stake" ovvero un informazione di valore appartenente all'untente che sia di difficiele riproducibilità. 

Per ogni interazione con l'applicazione, gli utenti devono generare una prova per dimostrare l'appatenenza all'albero di Merkle e devono rialscaire una prozione della loro chiave privata, dimostrando che si tratti effettivamente di una parte valida di essa. Durante questa procedura non vogliamo che nessuna informazione venga rilascaita oltre alla appartenenza e alal correttezza della porzione di chiave e per fare ciò sfruttiamo la tecnologia zk-SNARK

Per evitare lo spam, RLN implementa una regola anti-spam generale in cui gli utenti non possono effettuare più di X interazioni per epoca. Questo può essere applicato utilizzando lo schema di condivisione dei segreti di Shamir per dividere la chiave segreta in n parti, e se gli utenti effettuano più interazioni di quelle consentite per epoca, la loro chiave segreta può essere ricostruita.

Infine, il meccanismo RLN consente agli utenti di essere rimossi dall'albero di appartenenza da chiunque conosca la loro chiave segreta. Se si verifica un evento di spam, lo stake economico dello spammer può essere inviato al primo utente che segnala correttamente lo spammer fornendo la chiave segreta ricostruita dello spammer come prova.

Prima di esaminare in dettaglio lo sviluppo delle singole parti, analizzeremo gli strumenti utilizzati dal protocollo
per implementare le sue funzionalità.

\input{chapters/2.rln-protocol/sections/tools.tex}
\input{chapters/2.rln-protocol/sections/registration.tex}
\input{chapters/2.rln-protocol/sections/signalling.tex}
\input{chapters/2.rln-protocol/sections/slashing.tex}
